<div class="folders-back">

<%= render 'shared/contextMenu' %>

<!-- ファイル名作成用ポップアップの背景オーバーレイ -->
<div class="overlay" id="overlay"></div>

<!-- フォルダ作成フォーム（初期状態では非表示） -->
<div id="create-folder-form" style="display: none;">
  <%= form_with(model: @folder, local: true) do |form| %>
    <% if @folder.errors.any? %>
      <div id="error_explanation" class="error_explanation">
        <h2><%= pluralize(@folder.errors.count, "error") %> prohibited this folder from being saved:</h2>
        <ul>
          <% @folder.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= form.label :name, 'フォルダ名'%>
      <%= form.text_field :name, class: "folder-input-field" %>
    </div>

    <p>10文字以内で作成してください<p>

    <div class="actions">
      <%= form.submit "Create Folder", class: "folder-submit-button" %>
    </div>
  <% end %>
</div>
<div >
<div class="note-create-container">
    <h3 class="note-list"><i class="fas fa-book"></i> ノート一覧</h3>
    <button class="btn_01" id="create-folder-btn"><i class="fas fa-file-signature"></i>Create note</button>
</div>

<div class="homeContent-container">
  <%# 存在するノートを一覧で表示 %>
  <div class="folders-container">
    <% if @folders.empty? %>
      <p>まずはノートを作成しましょう</br>
      上の「フォルダの作成」から作成ができます</p>
    <% else %>
      <% @folders.each do |folder| %>
        <div class="folder-card" data-folder-id="<%= folder.id %>">
          <%= link_to folder_memos_path(folder), class: "folder-link" do %>
            <div class="folder-content">
              <div class="folder-name"><%= folder.name %></div>
            </div>
          <% end %>
          <div class="folder-actions">
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="records-container">
    <h3 style="font-size: 18px;">学習の記録</h3>
    <p>学習記録</p>

    <p>作成したフォルダ数 : <%= @total_folders_created %>回</p>
    <p>メモの作成合計数 : <%= @total_memos %>回</p>

    <p class=><%= link_to 'メモの記録詳細', learning_records_path %></p>
  </div>
</div>

<% if current_user.admin? %>
  <div class="admin-container mt-3">
    <%# 管理者のみ表示する %>
    <h3 style="font-size: 18px;">管理者システム</h3>
    <%= link_to 'ユーザー管理', users_path%>
    <%= link_to 'タグ管理', tags_path %>
    <%= link_to 'お問合せ一覧', posts_path %>
  </div>
<% end %>
</div>